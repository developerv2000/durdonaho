(()=>{function e(e,r){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){o&&(e=o);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var r=document.querySelector("#spinner");function o(e){var t,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];clearTimeout(t),t=setTimeout((function(){return e.apply(r,a)}),o)}}"serviceWorker"in navigator?navigator.serviceWorker.register(document.location.origin+"/service-worker.js").then((function(e){console.log("Service worker registration succeeded:",e)}),(function(e){console.log("Service worker registration failed:",e)})):console.log("Service workers are not supported."),document.body.addEventListener("click",(function(e){var t;"like"==e.target.dataset.action?(t=e.target,$.ajax({type:"POST",url:"/like",data:{quote_id:t.dataset.quoteId,author_id:t.dataset.authorId},success:function(e){var r=t.closest(".card");document.querySelectorAll('[data-card-id="'+r.dataset.cardId+'"]').forEach((function(t){var r=t.getElementsByClassName("card__actions-like-icon")[0];t.getElementsByClassName("card__actions-like-counter")[0].innerHTML=e.likesCount,"liked"==e.status?r.innerHTML="favorite":"unliked"==e.status&&(r.innerHTML="favorite_border")}))},error:function(){console.log("Ajax like error!")}})):"favorite"==e.target.dataset.action&&function(e){$.ajax({type:"POST",url:"/favorite",data:{quote_id:e.dataset.quoteId,author_id:e.dataset.authorId},success:function(t){var r=e.closest(".card");document.querySelectorAll('[data-card-id="'+r.dataset.cardId+'"]').forEach((function(e){var r=e.getElementsByClassName("card__actions-favorite-icon")[0];"added-into-favorites"==t.status?r.classList="material-icons card__actions-favorite-icon":"removed-from-favorites"==t.status&&(r.classList="material-icons-outlined card__actions-favorite-icon")}))},error:function(){console.log("Ajax favorite error!")}})}(e.target)})),$(document).ready((function(){$(".selectize-singular").selectize({}),$(".selectize-singular-taggable").selectize({persist:!1,create:function(e){return{value:e,text:e}},render:{option_create:function(e,t){return'<div class="create">Изофа кардан <strong>'+t(e.input)+"</strong>&hellip;</div>"}}}),$(".selectize-singular-linked").selectize({onChange:function(e){window.location=e}}),$(".selectize-multiple").selectize({}),$(".selectize-multiple-taggable").selectize({delimiter:",",persist:!1,create:function(e){return{value:e,text:e}},render:{option_create:function(e,t){return'<div class="create">Изофа кардан <strong>'+t(e.input)+"</strong>&hellip;</div>"}}})})),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),document.querySelector('[data-action="show-mobile-menu"]').addEventListener("click",(function(e){document.querySelector(".mobile-menu").classList.add("mobile-menu--visible"),document.body.style.overflowY="hidden"})),document.querySelector('[data-action="hide-mobile-menu"]').addEventListener("click",(function(e){document.querySelector(".mobile-menu").classList.remove("mobile-menu--visible"),document.body.style.overflowY="auto"})),$(".card-carousel").owlCarousel({loop:!0,margin:0,nav:!0,navText:['<span class="material-icons-outlined">arrow_back_ios</span>','<span class="material-icons-outlined">arrow_forward_ios</span>'],items:1,dots:!1,singleItem:!0,autoHeight:!0,transitionStyle:"fade"}),document.querySelectorAll(".dropdown__button").forEach((function(e){e.addEventListener("click",(function(t){e.closest(".dropdown").classList.add("dropdown--opened")}))})),document.querySelectorAll(".dropdown__background").forEach((function(e){e.addEventListener("click",(function(t){e.closest(".dropdown").classList.remove("dropdown--opened")}))})),document.querySelectorAll('[data-action="show-modal"]').forEach((function(e){e.addEventListener("click",(function(t){document.getElementById(e.dataset.targetId).classList.add("modal--visible"),document.body.style.overflowY="hidden"}))})),document.querySelectorAll('[data-action="hide-modal"]').forEach((function(e){e.addEventListener("click",(function(t){document.body.style.overflowY="auto",document.getElementById(e.dataset.targetId).classList.remove("modal--visible")}))})),document.querySelector("#login-modal-register-button").addEventListener("click",(function(e){document.querySelector("#register-modal").classList.add("modal--visible"),document.querySelector("#login-modal").classList.remove("modal--visible")})),document.querySelector("#login-modal-forgot-password").addEventListener("click",(function(e){document.querySelector("#forgot-password-modal").classList.add("modal--visible"),document.querySelector("#login-modal").classList.remove("modal--visible")}));var n=document.querySelector(".aside-text__more");function a(){document.querySelectorAll('[data-action="show-report-bug-modal"]').forEach((function(e){e.addEventListener("click",(function(t){document.body.style.overflowY="hidden";var r=document.querySelector("#report-bug-modal");r.querySelector('[name="quote_id"]').value=e.dataset.quoteId?e.dataset.quoteId:null,r.querySelector('[name="author_id"]').value=e.dataset.authorId?e.dataset.authorId:null,r.classList.add("modal--visible")}))}))}n&&n.addEventListener("click",(function(e){document.querySelector(".aside-text__body").classList.add("aside-text__body--full"),n.style.display="none"})),a();var i=document.querySelector("#register-form");i&&i.addEventListener("submit",(function(t){t.preventDefault(),r.classList.add("spinner--show"),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/register",data:new FormData(i),processData:!1,contentType:!1,success:function(t){if("success"==t.validation)window.location.reload();else if("failed"==t.validation){var o=i.querySelector(".modal-form__errors");o.innerHTML="";var n,a=e(t.errorMessages);try{for(a.s();!(n=a.n()).done;){var c=n.value;o.innerHTML+="<li>".concat(c,"</li>")}}catch(e){a.e(e)}finally{a.f()}var s,l=e(i.querySelectorAll(".input--error"));try{for(l.s();!(s=l.n()).done;){s.value.classList.remove("input--error")}}catch(e){l.e(e)}finally{l.f()}var d,u=e(t.failedInputs);try{for(u.s();!(d=u.n()).done;){var f=d.value;i.querySelector('[name="'.concat(f,'"]')).classList.add("input--error")}}catch(e){u.e(e)}finally{u.f()}}r.classList.remove("spinner--show")},error:function(){r.classList.remove("spinner--show"),console.log("Ajax register failed !")}})}));var c=document.querySelector("#login-form");c&&c.addEventListener("submit",(function(e){e.preventDefault(),r.classList.add("spinner--show"),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/login",data:new FormData(c),processData:!1,contentType:!1,success:function(e){if("success"==e)window.location.reload();else if("failed"==e){c.querySelector(".modal-form__errors").innerHTML="<li>Номи корбарӣ ё рамз иштибоҳ аст</li>"}r.classList.remove("spinner--show")},error:function(){r.classList.remove("spinner--show"),console.log("Ajax login failed !")}})}));var s=document.querySelector("#verification-resend-email-form");s&&s.addEventListener("submit",(function(e){e.preventDefault(),r.classList.add("spinner--show"),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/resend-email",data:new FormData(s),processData:!1,contentType:!1,success:function(){window.location.reload(),r.classList.remove("spinner--show")},error:function(){r.classList.remove("spinner--show"),console.log("Ajax Verification Resend Email failed !")}})}));var l=document.querySelector("#forgot-password-form");l&&l.addEventListener("submit",(function(e){e.preventDefault(),r.classList.add("spinner--show"),$.ajax({type:"POST",enctype:"multipart/form-data",url:"/forgot-password",data:new FormData(l),processData:!1,contentType:!1,success:function(e){if("success"==e)window.location.reload();else if("failed"==e){l.querySelector(".modal-form__errors").innerHTML="<li>Корбаре бо чунин имейл вуҷуд надорад!</li>"}r.classList.remove("spinner--show")},error:function(){r.classList.remove("spinner--show"),console.log("Ajax forgot password failed !")}})}));var d=document.querySelector("#aside-search-input");if(d){var u=document.querySelectorAll(".aside-categories__item");d.addEventListener("input",o((function(e){u.forEach((function(t){t.children[0].textContent.toLowerCase().includes(e.target.value.toLowerCase())?t.style.display="":t.style.display="none"}))})))}var f=document.querySelector("#categories-filter-form");f&&f.addEventListener("submit",(function(e){e.preventDefault()}));var m=document.querySelector("#categories-filter-all-btn");m&&m.addEventListener("click",(function(t){var r,o=e(f.querySelectorAll("input[name=category_id]:checked"));try{for(o.s();!(r=o.n()).done;)chb=r.value,chb.checked=!1}catch(e){o.e(e)}finally{o.f()}m.classList.add("categories-filter__button--active"),p()}));var v=document.querySelector("#categories-filter-more-btn");v&&v.addEventListener("click",(function(e){for(var t=document.querySelectorAll(".categories-filter__checkbox--hidden"),r=0;r<t.length;r++)t[r].classList.remove("categories-filter__checkbox--hidden");v.style.display="none"})),document.querySelectorAll(".categories-filter__checkbox").forEach((function(e){e.addEventListener("change",(function(e){f.querySelectorAll("input[name=category_id]:checked").length?m.classList.remove("categories-filter__button--active"):m.classList.add("categories-filter__button--active"),p()}))}));var y=document.querySelector("#categories-filter-search-input");function p(){var e=new FormData(f),t=e.getAll("category_id").join("-");e.append("category_id",t),$.ajax({type:"POST",enctype:"multipart/form-data",url:f.action,data:e,processData:!1,contentType:!1,success:function(e){var t=document.getElementById("main-list");t.innerHTML=e,t.querySelectorAll(".ya-share2").forEach((function(e){Ya.share2(e,{})})),a()},error:function(){console.log("Ajax update list error!")}})}y&&y.addEventListener("input",o((function(e){p()})));var g=document.querySelector("#profile-update-form");if(g){g.addEventListener("submit",(function(e){r.classList.add("spinner--show")})),document.querySelectorAll('[data-action="enable-readonly-input"]').forEach((function(e){e.addEventListener("click",(function(t){var r=e.closest(".form-group");r.querySelectorAll("input").forEach((function(e){e.readOnly=!1})),r.querySelectorAll("textarea").forEach((function(e){e.readOnly=!1})),"old_password"==e.dataset.targetInputName&&(g.querySelector('[name="new_password"]').readOnly=!1,g.querySelector('[name="new_password"]').required=!0,g.querySelector('[name="old_password"]').required=!0);var o=g.querySelector('[name="'+e.dataset.targetInputName+'"]');"email"!=o.name&&o.setSelectionRange(o.value.length,o.value.length),o.focus(),e.style.display="none"}))}));var h=document.querySelector("#profile-form-image"),S=document.querySelector("#profile-form-image-input"),q=document.querySelector("#profile-form-image-remove-btn"),L=document.querySelector("#profile-form-image-remove-input");q.addEventListener("click",(function(e){S.value=null,h.src="/img/users/__default.jpg",L.value=1})),S.addEventListener("change",(function(e){var t=e.target.files[0];t?t.type.match(/image.*/)?(h.src=URL.createObjectURL(t),L.value=0):(S.value="",h.src="/img/users/__default.jpg",L.value=1,alert("Формат файла не поддерживается!")):(h.src="/img/users/__default.jpg",L.value=1)}))}var w=document.querySelector("#store-quotes-form");w&&w.addEventListener("submit",(function(){r.classList.add("spinner--show")}));var _=document.querySelector("#update-quotes-form");function b(e){document.querySelectorAll(["[data-source-key]"]).forEach((function(t){t.dataset.sourceKey==e?(t.classList.remove("form-group--hidden"),t.querySelectorAll("input").forEach((function(e){e.required=!0})),t.querySelectorAll("select").forEach((function(e){e.required=!0}))):(t.classList.add("form-group--hidden"),t.querySelectorAll("input").forEach((function(e){e.required=!1})),t.querySelectorAll("select").forEach((function(e){e.required=!1})))}))}_&&_.addEventListener("submit",(function(){r.classList.add("spinner--show")})),document.querySelector('select[name="source_key"]')&&($(".source-selectize").selectize({onChange:function(e){b(e)}}),b(activeSource))})();